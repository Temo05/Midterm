<h1>{{ title }}</h1>

<div *ngFor="let user of usersData">
  <div *ngIf="user.age > 20">
    <p>{{ user.firstname }} {{ user.lastname }} Age: {{ user.age }}</p>
  </div>
</div>

<app-user (childData)="takeData($event)" [data]="parentUsersData"></app-user>

<div *ngFor="let user of readData" class="users">
  <p>Id : {{ user.id }}</p>
  <p>{{ user.FirstName }}</p>
  <p>{{ user.LastName }}</p>
  <p>{{ user.DateOfBirth }}</p>
  <p>{{ user.PhoneNumber }}</p>
  <p>{{ user.Email }}</p>
</div>

<form [formGroup]="userForm" (ngSubmit)="addUser()" novalidate>
  <div class="form-group">
    <label for="firstName">First Name</label>
    <input
      id="firstName"
      type="text"
      class="form-control"
      formControlName="firstName"
      [ngClass]="{
        'is-invalid':
          userForm.get('firstName')?.invalid &&
          userForm.get('firstName')?.touched
      }"
    />
    <div
      *ngIf="userForm.get('firstName')?.errors?.['required'] && userForm.get('firstName')?.touched"
      class="invalid-feedback"
    >
      First Name is required.
    </div>
    <div
      *ngIf="userForm.get('firstName')?.errors?.['minlength'] && userForm.get('firstName')?.touched"
      class="invalid-feedback"
    >
      First Name must be at least 3 characters.
    </div>
  </div>

  <div class="form-group">
    <label for="lastName">Last Name</label>
    <input
      id="lastName"
      type="text"
      class="form-control"
      formControlName="lastName"
      [ngClass]="{
        'is-invalid':
          userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched
      }"
    />
    <div
      *ngIf="userForm.get('lastName')?.errors?.['required'] && userForm.get('lastName')?.touched"
      class="invalid-feedback"
    >
      Last Name is required.
    </div>
    <div
      *ngIf="userForm.get('lastName')?.errors?.['minlength'] && userForm.get('lastName')?.touched"
      class="invalid-feedback"
    >
      Last Name must be at least 3 characters.
    </div>
  </div>

  <div class="form-group">
    <label for="email">Email</label>
    <input
      id="email"
      type="email"
      class="form-control"
      formControlName="email"
      [ngClass]="{
        'is-invalid':
          userForm.get('email')?.invalid && userForm.get('email')?.touched
      }"
    />
    <div
      *ngIf="userForm.get('email')?.errors?.['required'] && userForm.get('email')?.touched"
      class="invalid-feedback"
    >
      Email is required.
    </div>
    <div
      *ngIf="userForm.get('email')?.errors?.['minlength'] && userForm.get('email')?.touched"
      class="invalid-feedback"
    >
      Email must be at least 8 characters.
    </div>
    <div
      *ngIf="userForm.get('email')?.errors?.['email'] && userForm.get('email')?.touched"
      class="invalid-feedback"
    >
      Please enter a valid email address.
    </div>
  </div>

  <div class="form-group">
    <label for="phoneNumber">Phone Number</label>
    <input
      id="phoneNumber"
      type="text"
      class="form-control"
      formControlName="phoneNumber"
      [ngClass]="{
        'is-invalid':
          userForm.get('phoneNumber')?.invalid &&
          userForm.get('phoneNumber')?.touched
      }"
    />
    <div
      *ngIf="userForm.get('phoneNumber')?.errors?.['required'] && userForm.get('phoneNumber')?.touched"
      class="invalid-feedback"
    >
      Phone Number is required.
    </div>
    <div
      *ngIf="userForm.get('phoneNumber')?.errors?.['minlength'] && userForm.get('phoneNumber')?.touched"
      class="invalid-feedback"
    >
      Phone Number must be at least 9 characters.
    </div>
  </div>

  <div class="form-group">
    <label for="dateOfBirth">Date of Birth</label>
    <input
      id="dateOfBirth"
      type="date"
      class="form-control"
      formControlName="dateOfBirth"
      [ngClass]="{
        'is-invalid':
          userForm.get('dateOfBirth')?.invalid &&
          userForm.get('dateOfBirth')?.touched
      }"
    />
    <div
      *ngIf="userForm.get('dateOfBirth')?.errors?.['required'] && userForm.get('dateOfBirth')?.touched"
      class="invalid-feedback"
    >
      Date of Birth is required.
    </div>
  </div>

  <div class="form-group">
    <label for="id">ID</label>
    <input
      id="id"
      type="text"
      class="form-control"
      formControlName="id"
      [ngClass]="{
        'is-invalid': userForm.get('id')?.invalid && userForm.get('id')?.touched
      }"
    />
    <div
      *ngIf="userForm.get('id')?.errors?.['required'] && userForm.get('id')?.touched"
      class="invalid-feedback"
    >
      ID is required.
    </div>
    <div
      *ngIf="userForm.get('id')?.errors?.['minlength'] && userForm.get('id')?.touched"
      class="invalid-feedback"
    >
      ID must be at least 5 characters.
    </div>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">
    Add User
  </button>
</form>

<div class="mt-3">
  <h5>Users List:</h5>
  <ul>
    <li *ngFor="let user of users">
      {{ user.firstName }} {{ user.lastName }} - {{ user.email }} -
      {{ user.phoneNumber }} - {{ user.dateOfBirth }} - {{ user.id }}
    </li>
  </ul>
</div>
